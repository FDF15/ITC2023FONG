<!DOCTYPE html>
<html>
<head>
  <title>Assignment #4</title>
</head>
<body>
  <h2>Assignment #4</h2>
  <p>Payroll List</p>

  <div>
    <label for="empName">Employee Name:</label>
    <input type="text" id="empName">
    <label for="daysWorked">Days Worked:</label>
    <input type="number" id="daysWorked">
    <label for="dailyRate">Daily Rate:</label>
    <input type="number" id="dailyRate">
    <label for="deductionAmount">Deduction Amount:</label>
    <input type="number" id="deductionAmount">
    <button onclick="addEmployee()">Add Employee</button>
  </div>

  <table id="payrollTable">
    <thead>
      <tr>
        <th>No.</th>
        <th>Employee Name</th>
        <th>Days Worked</th>
        <th>Daily Rate</th>
        <th>Gross Pay</th>
        <th>Deduction Amount</th>
        <th>Net Pay</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody id="payrollBody">
    </tbody>
  </table>

  <div>
    <label for="deleteLine">Delete Line Number:</label>
    <input type="number" id="deleteLine">
    <button onclick="confirmDeleteDialog()">Delete Employee</button>
  </div>

  <dialog id="dlgAreYouSure">
    <form method="dialog">
       <h4 id="dlgmsg2">Are you sure?</h4>   
       <button id="btnYes" value="yes" >Yes</button>
       <button id="btnNo" value="no" >No</button>
       
    </form>
  </dialog>

  <script>
    let payrollList = [];

    function addEmployee() {
      const empName = document.getElementById('empName').value;
      const daysWorked = parseInt(document.getElementById('daysWorked').value);
      const dailyRate = parseFloat(document.getElementById('dailyRate').value);
      const deductionAmount = parseFloat(document.getElementById('deductionAmount').value);

      const grossPay = daysWorked * dailyRate;
      const netPay = grossPay - deductionAmount;

      const employee = {
        empName,
        daysWorked,
        dailyRate,
        grossPay,
        deductionAmount,
        netPay
      };

      payrollList.push(employee);
      displayPayroll();
      clearInputFields();
    }

    function confirmDeleteDialog() {
      const deleteLine = parseInt(document.getElementById('deleteLine').value);
      if (deleteLine > 0 && deleteLine <= payrollList.length) {
        const dlg = document.getElementById('dlgAreYouSure');
        dlg.showModal();

        const btnYes = document.getElementById('btnYes');
        const btnNo = document.getElementById('btnNo');

        btnYes.onclick = function() {
          deleteEmployee(deleteLine);
          dlg.close();
        };

        btnNo.onclick = function() {
          dlg.close();
        };
      } else {
        alert('Invalid line number');
      }
    }

    function deleteEmployee(deleteLine) {
      payrollList.splice(deleteLine - 1, 1);
      displayPayroll();
    }

    function displayPayroll() {
      const payrollBody = document.getElementById('payrollBody');
      payrollBody.innerHTML = '';

      payrollList.forEach((employee, index) => {
        const row = payrollBody.insertRow();
        const numCell = row.insertCell(0);
        const nameCell = row.insertCell(1);
        const daysCell = row.insertCell(2);
        const rateCell = row.insertCell(3);
        const grossPayCell = row.insertCell(4);
        const deductionCell = row.insertCell(5);
        const netPayCell = row.insertCell(6);
        const deleteCell = row.insertCell(7);

        numCell.innerHTML = index + 1;
        nameCell.innerHTML = employee.empName;
        daysCell.innerHTML = employee.daysWorked;
        rateCell.innerHTML = employee.dailyRate;
        grossPayCell.innerHTML = employee.grossPay;
        deductionCell.innerHTML = employee.deductionAmount;
        netPayCell.innerHTML = employee.netPay;

        const deleteButton = document.createElement('button');
        deleteButton.innerHTML = 'Delete';
        deleteButton.onclick = function () {
          confirmDeleteDialog(index + 1);
        };
        deleteCell.appendChild(deleteButton);
      });
    }

    function clearInputFields() {
      document.getElementById('empName').value = '';
      document.getElementById('daysWorked').value = '';
      document.getElementById('dailyRate').value = '';
      document.getElementById('deductionAmount').value = '';
    }
  </script>

  <a href="index.html" class="w3-bar-item w3-button">Back to Home</a>

</body>
</html>
